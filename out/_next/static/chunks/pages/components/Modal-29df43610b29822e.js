(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{1631:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/Modal",function(){return n(5250)}])},5250:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var o=n(4051),a=n.n(o),r=n(5893),c=n(8331),l=n.n(c),s=n(7294),u=n(5617),i=n(8090),d=n(9669),_=n.n(d),m=n(1163);function p(t,e,n,o,a,r,c){try{var l=t[r](c),s=l.value}catch(u){return void n(u)}l.done?e(s):Promise.resolve(s).then(o,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var r=t.apply(e,n);function c(t){p(r,o,a,c,l,"next",t)}function l(t){p(r,o,a,c,l,"throw",t)}c(void 0)}))}}function h(t){var e=t.show,n=t.name,o=(0,s.useState)(""),c=o[0],d=o[1],p=(0,s.useState)(""),h=p[0],g=p[1],v=(0,u.I0)(),x=(0,m.useRouter)();function k(){return(k=f(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c||!h){t.next=8;break}return t.next=3,_().get("/company").then((function(t){return t.data}));case 3:return t.sent,t.next=6,_().post("/login",{username:c,password:h}).then((function(t){return localStorage.setItem("access_token",t.data.access_token)})).catch((function(t){return console.log(t)}));case 6:return t.next=8,_().get("/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")}}).then((function(t){localStorage.setItem("_id",t.data._id),localStorage.setItem("role",t.data.role.trim()),console.log(t.data),"mAdmin"===localStorage.getItem("role").trim()?(localStorage.setItem("company_id",t.data.owner),x.push("/masterUser")):"User"===localStorage.getItem("role").trim()&&(localStorage.setItem("company_id",t.data.company),x.push("/userProfile"))}));case 8:v((0,i.$J)());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,r.jsx)("div",{onClick:function(){return v((0,i.$J)())},className:l().modal,style:{display:e?"block":"none"},children:(0,r.jsxs)("div",{onClick:function(t){return t.stopPropagation()},className:l().modal_main,children:[(0,r.jsx)("h2",{children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),(0,r.jsx)("h3",{children:n}),(0,r.jsx)("input",{onChange:function(t){return d(t.target.value)},className:l().modal_input,value:c,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",type:"text"}),(0,r.jsx)("input",{onChange:function(t){return g(t.target.value)},className:l().modal_input,value:h,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}),(0,r.jsx)("button",{onClick:function(){return k.apply(this,arguments)},className:l().modal_button,children:"\u0412\u043e\u0439\u0442\u0438"})]})})}},8331:function(t){t.exports={modal:"Modal_modal__VQYgz",modal_main:"Modal_modal_main__y3Ddc",modal_header:"Modal_modal_header__cy6Lp",modal_input:"Modal_modal_input__s__sv",modal_button:"Modal_modal_button__Vkx4x"}},1163:function(t,e,n){t.exports=n(387)}},function(t){t.O(0,[669,774,888,179],(function(){return e=1631,t(t.s=e);var e}));var e=t.O();_N_E=e}]);