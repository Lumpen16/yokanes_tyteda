(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{8176:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=n(4051),a=n.n(r),o=n(5893),u=n(8345),i=n.n(u),s=n(9669),c=n.n(s),l=n(7294);function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r,a,o,u){try{var i=t[o](u),s=i.value}catch(c){return void n(c)}i.done?e(s):Promise.resolve(s).then(r,a)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){p(o,r,a,u,i,"next",t)}function i(t){p(o,r,a,u,i,"throw",t)}u(void 0)}))}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t,e,n){return y=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&m(a,n.prototype),a},y.apply(null,arguments)}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(s){i=!0,a=s}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function j(t){var e=t.orders,n=function(t){var e=0,n="\u041d\u0438\u0447\u0435\u0433\u043e(",r=0,a="\u041d\u0438\u0447\u0435\u0433\u043e",o=0,u=!0,i=!1,s=void 0;try{for(var c,l=new Set(t.dishes)[Symbol.iterator]();!(u=(c=l.next()).done);u=!0){var f=c.value,p=!0,d=!1,h=void 0;try{for(var y,m=t.dishes[Symbol.iterator]();!(p=(y=m.next()).done);p=!0){y.value.name===f.name&&o++}}catch(v){d=!0,h=v}finally{try{p||null==m.return||m.return()}finally{if(d)throw h}}e<o&&(e=o,n=f.name),r>o&&(r=o,a=f.name),o=0}}catch(v){i=!0,s=v}finally{try{u||null==l.return||l.return()}finally{if(i)throw s}}return[{name:n,count:e},{name:a,count:r}]},r=function(t){var e=y(Date,_(t.split(".").reverse())),n=y(Date,_(j.split("-"))),r=y(Date,_(D.split("-")));return n.valueOf()<e.valueOf()&&r.valueOf()>e.valueOf()&&(console.log(n,e,r),console.log("im there"),!0)},u=(0,l.useState)([]),s=(u[0],u[1]),f=(0,l.useState)([]),p=f[0],h=f[1],m=new Date,x=(0,l.useState)(m.toLocaleDateString().split(".").reverse().join("-")),j=x[0],S=x[1],g=(0,l.useState)(e),b=g[0],w=g[1];m.setDate(m.getDate()+30);var P=(0,l.useState)(m.toLocaleDateString().split(".").reverse().join("-")),D=P[0],O=P[1];function A(){return(A=d(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().get("/order").then((function(t){return t.data}));case 2:e=t.sent,w(e.filter((function(t){return r(t.date)})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,l.useEffect)((function(){var t=[],e=!0,r=!1,a=void 0;try{for(var o,u=b[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var i,c=o.value;(i=t).push.apply(i,_(c.dish))}}catch(l){r=!0,a=l}finally{try{e||null==u.return||u.return()}finally{if(r)throw a}}s(t),function(t){for(var e=[{name:"\u0421\u0430\u043b\u0430\u0442",dishes:t.filter((function(t){return"\u0421\u0430\u043b\u0430\u0442"===t.type})),popular:"",notPopular:""},{name:"\u041f\u0435\u0440\u0432\u043e\u0435",dishes:t.filter((function(t){return"\u041f\u0435\u0440\u0432\u043e\u0435"===t.type})),popular:"",notPopular:""},{name:"\u0412\u0442\u043e\u0440\u043e\u0435",dishes:t.filter((function(t){return"\u0412\u0442\u043e\u0440\u043e\u0435"===t.type})),popular:"",notPopular:""},{name:"\u0413\u0430\u0440\u043d\u0438\u0440",dishes:t.filter((function(t){return"\u0413\u0430\u0440\u043d\u0438\u0440"===t.type})),popular:"",notPopular:""},{name:"\u0421\u043e\u0443\u0441",dishes:t.filter((function(t){return"\u0421\u043e\u0443\u0441"===t.type})),popular:"",notPopular:""},{name:"\u041d\u0430\u043f\u0438\u0442\u043e\u043a",dishes:t.filter((function(t){return"\u041d\u0430\u043f\u0438\u0442\u043e\u043a"===t.type})),popular:"",notPopular:""}],r=0;r<e.length;r++){var a;a=v(n(e[r]),2),e[r].popular=a[0],e[r].notPopular=a[1]}h(e)}(t)}),[b]),(0,l.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[j,D]),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0435\u0440\u0438\u043e\u0434"}),(0,o.jsx)("input",{className:i().stats_date,value:j,onChange:function(t){return S(t.target.value)},type:"date"}),(0,o.jsx)("input",{className:i().stats_date,value:D,onChange:function(t){return O(t.target.value)},type:"date"}),p.map((function(t){return(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:t.name}),(0,o.jsxs)("p",{children:["\u0417\u0430\u043a\u0430\u0437\u0430\u043d\u043e \u0432 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: ",t.dishes.length]}),(0,o.jsxs)("p",{children:["\u0421\u0430\u043c\u043e\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u0431\u043b\u044e\u0434\u043e \u0432 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438: ",t.popular.name," \u0431\u044b\u043b\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043d\u043e ",t.popular.count," \u0440\u0430\u0437\u0430"]})]},Math.random())}))]})}function S(t){var e=t.name,n=t.id,r=t.countOfUsers,a=t.orders,u=(0,l.useState)([]),i=u[0],s=u[1];return(0,l.useEffect)((function(){s(a.filter((function(t){return t.company===n})))}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:e}),(0,o.jsxs)("p",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u043e\u0431\u0435\u0434\u043e\u0432: ",i.length]}),(0,o.jsxs)("p",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: ",r]})]})}function g(){var t=(0,l.useState)([]),e=t[0],n=t[1],r=(0,l.useState)([]),u=r[0],s=r[1];function f(){return(f=d(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().get("/company").then((function(t){return t.data}));case 2:e=t.sent,n(e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=d(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c().get("/order").then((function(t){return t.data}));case 2:e=t.sent,s(e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,l.useEffect)((function(){!function(){f.apply(this,arguments)}(),function(){p.apply(this,arguments)}()}),[]),(0,o.jsx)("div",{className:i().stats_container,children:(0,o.jsxs)("div",{className:i().stats_companies,children:[(0,o.jsxs)("div",{className:i().stats_companies_item,children:[(0,o.jsx)("h2",{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f\u043c:"}),u.length>0&&e.map((function(t){return(0,o.jsx)(S,{name:t.name,id:t._id,countOfUsers:t.users.length,orders:u},Math.random())}))]}),(0,o.jsxs)("div",{className:i().stats_companies_item,children:[(0,o.jsx)("h2",{children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c"}),u.length>0&&(0,o.jsx)(j,{orders:u})]})]})})}},8345:function(t){t.exports={stats_container:"Statistics_stats_container__mPHtL",stats_companies_item:"Statistics_stats_companies_item__r_QP8",stats_date:"Statistics_stats_date__exdXh"}}}]);