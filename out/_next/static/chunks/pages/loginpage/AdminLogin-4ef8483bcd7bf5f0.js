(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{3455:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loginpage/AdminLogin",function(){return t(679)}])},679:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return p}});var o=t(4051),r=t.n(o),a=t(5893),s=t(4514),u=t.n(s),i=t(1163),c=t(7294),l=t(5617),f=(t(8090),t(9669)),m=t.n(f);function _(n,e,t,o,r,a,s){try{var u=n[a](s),i=u.value}catch(c){return void t(c)}u.done?e(i):Promise.resolve(i).then(o,r)}function d(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var a=n.apply(e,t);function s(n){_(a,o,r,s,u,"next",n)}function u(n){_(a,o,r,s,u,"throw",n)}s(void 0)}))}}function p(){var n=(0,c.useState)(""),e=n[0],t=n[1],o=(0,c.useState)(""),s=o[0],f=o[1],_=(0,i.useRouter)();(0,l.I0)();function p(){return(p=d(r().mark((function n(t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!e||!s){n.next=6;break}return n.next=4,m().post("/login",{username:e,password:s}).then((function(n){n.data.access_token?(localStorage.setItem("access_token",n.data.access_token),console.log(n.data.access_token)):console.log("no token")})).catch((function(n){return console.log(n)}));case 4:return n.next=6,m().get("/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("access_token")}}).then((function(n){console.log(n),localStorage.setItem("_id",n.data._id),localStorage.setItem("role",n.data.role.trim()),"Admin"===localStorage.getItem("role").trim()&&_.push("adminPanel")})).catch((function(n){return console.log(n)}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,a.jsxs)("form",{className:u().form,children:[(0,a.jsx)("label",{id:"username",children:"Username:"}),(0,a.jsx)("input",{value:e,onChange:function(n){return t(n.target.value)},className:u().form_input,type:"text",name:"username"}),(0,a.jsx)("label",{id:"password",children:"Password:"}),(0,a.jsx)("input",{value:s,onChange:function(n){f(n.target.value)},className:u().form_input,type:"password",name:"password"}),(0,a.jsx)("button",{onClick:function(n){return function(n){return p.apply(this,arguments)}(n)},className:u().form_button,children:"Login"})]})}},4514:function(n){n.exports={form:"AdminLogin_form__DsLyN",form_input:"AdminLogin_form_input__iQI9X",form_button:"AdminLogin_form_button__BLdxk"}},1163:function(n,e,t){n.exports=t(387)}},function(n){n.O(0,[669,774,888,179],(function(){return e=3455,n(n.s=e);var e}));var e=n.O();_N_E=e}]);